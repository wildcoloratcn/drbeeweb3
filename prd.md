# DrBEE DApp 产品需求文档 (PRD)

## 1. 项目概述

### 1.1 项目名称
DrBEE - 去中心化蜜蜂主题生态系统

### 1.2 项目愿景
DrBEE 是一个基于区块链的去中心化应用平台，以蜜蜂为主题，为用户提供代币质押、NFT收集和每日奖励等功能。项目旨在构建一个可持续的代币经济模型，让用户通过参与生态系统获得甜蜜的奖励。

### 1.3 目标用户
- DeFi 爱好者和投资者
- NFT 收藏家
- 对高收益质押感兴趣的用户
- 加密货币新手（通过简单的每日领取功能）

## 2. 技术架构

### 2.1 智能合约层
**平台**: Ethereum (当前部署在 Sepolia 测试网)
**开发框架**: Foundry
**安全特性**: OpenZeppelin 标准库

#### 2.1.1 DrBEE Token (BEE)
- **类型**: ERC20 可燃烧代币
- **总供应量**: 100亿 BEE (10,000,000,000 * 10^18)
- **精度**: 18位小数
- **特性**: 支持燃烧机制
- **合约地址**: `0x2011551065B37D6762D7401ebBaa39adc4eED0e7`

#### 2.1.2 DrBEE NFT (BEEN)
- **类型**: ERC721 NFT
- **最大供应量**: 10,000个
- **铸造价格**: 10 BEE
- **变体数量**: 12种不同设计
- **元数据存储**: IPFS分布式存储
- **铸造机制**: 燃烧BEE代币进行铸造
- **合约地址**: `0xA6C0E968cCF8DB76eEDe84Bf3d62151c999208BD`

#### 2.1.3 质押合约 (BeeStaking)
- **年化收益率**: 80% APY
- **计算频率**: 每秒计算利息
- **锁定期**: 无锁定期，随时可提取
- **复投机制**: 追加质押时自动复投利息
- **合约地址**: `0x7C12D5a404867F9E265FbB6947aC46592B226451`

#### 2.1.4 金库合约 (Vault)
- **每日奖励**: 100 BEE
- **冷却时间**: 24小时
- **领取机制**: 用户主动领取
- **合约地址**: `0x1c852498880ff2711a62541C4A36AE8dDEC6dfE9`

### 2.2 前端应用层
**框架**: Next.js 15.5.0 + TypeScript
**UI库**: TailwindCSS 4.0
**Web3集成**: RainbowKit + Wagmi + Viem
**部署**: 支持Vercel等平台部署

#### 2.2.1 页面结构
```
/                  # 主页 - 功能概览和平台统计
├── /nft          # NFT铸造页面
├── /staking      # 质押页面
└── /vault        # 每日领取页面
```

#### 2.2.2 组件架构
```
src/
├── components/
│   ├── Common/      # 通用组件 (钱包连接、加载器、交易状态)
│   ├── Layout/      # 布局组件 (头部、底部)
│   └── UI/          # UI组件 (按钮、卡片、统计卡)
├── hooks/           # 业务逻辑钩子
├── types/           # TypeScript类型定义
└── utils/           # 工具函数和常量
```

### 2.3 存储层
**IPFS**: NFT图像和元数据存储
- 12个NFT变体图像
- 对应的JSON元数据文件
- 去中心化存储保证永久性

## 3. 核心功能模块

### 3.1 代币系统
#### 功能描述
BEE代币作为整个生态系统的核心，具有以下用途：
- 质押获得高收益
- 铸造NFT的支付手段
- 每日领取奖励的载体

#### 技术实现
- 基于OpenZeppelin ERC20标准
- 集成燃烧机制，用于NFT铸造时的通缩效应
- 所有者权限管理

### 3.2 NFT铸造系统
#### 功能描述
用户可以燃烧10个BEE代币来铸造独特的DrBEE NFT，每个NFT都有不同的特性和稀有度。

#### 技术实现
- 基于ERC721URIStorage标准
- 随机分配12种变体之一
- 防重入攻击保护
- 最大供应量限制

#### 业务规则
- 铸造价格：10 BEE
- 最大供应量：10,000个
- 变体循环分配机制
- 支持元数据更新

### 3.3 质押系统
#### 功能描述
用户可以质押BEE代币获得80%的年化收益，利息按秒计算，无锁定期限制。

#### 技术实现
- 利率：80% APY (每秒利率：25370000000 / 1e18)
- 复合计息机制
- 防重入攻击保护
- 实时利息计算

#### 业务规则
- 无最小质押限额
- 无锁定期，随时可提取
- 追加质押时自动复投已产生的利息
- 提取时获得本金+利息

### 3.4 每日领取系统
#### 功能描述
用户可以每24小时领取100个免费的BEE代币，降低新用户进入门槛。

#### 技术实现
- 固定奖励：100 BEE
- 冷却时间：24小时
- 用户领取记录追踪
- 合约余额检查

#### 业务规则
- 首次领取无需等待
- 后续领取需等待24小时冷却
- 无领取次数限制

## 4. 用户体验设计

### 4.1 页面布局
- **响应式设计**: 支持桌面和移动端
- **简洁界面**: 清晰的操作流程和状态反馈
- **实时数据**: 动态显示余额、利息等信息

### 4.2 交互流程
1. **钱包连接**: 支持多种钱包的一键连接
2. **数据加载**: 智能合约状态的实时获取
3. **交易确认**: 清晰的交易状态和错误处理
4. **结果反馈**: 交易成功/失败的明确提示

### 4.3 状态管理
- 加载状态、错误状态、成功状态的统一处理
- 交易进度的实时跟踪
- 自动刷新机制

## 5. 安全考虑

### 5.1 智能合约安全
- **OpenZeppelin标准**: 使用经过审计的安全库
- **防重入攻击**: 所有状态变更操作都有ReentrancyGuard保护
- **权限控制**: 敏感操作限制为合约所有者
- **溢出保护**: 使用SafeMath库防止数值溢出

### 5.2 前端安全
- **输入验证**: 所有用户输入都进行验证
- **错误处理**: 完善的错误捕获和用户友好的错误消息
- **交易确认**: 用户操作前的明确确认机制

## 6. 经济模型

### 6.1 代币经济
- **总供应量**: 100亿BEE，全部预挖
- **通缩机制**: NFT铸造燃烧代币
- **通胀控制**: 质押奖励和每日领取通过合约余额控制

### 6.2 收益来源
- **质押收益**: 80%年化收益吸引长期持有
- **NFT收藏**: 限量NFT的收藏价值
- **每日奖励**: 免费代币获取途径

### 6.3 生态循环
1. 用户通过每日领取获得初始BEE
2. 质押BEE获得高收益
3. 使用BEE铸造稀缺NFT
4. NFT铸造燃烧代币，创造通缩压力

## 7. 开发和部署

### 7.1 开发环境
- **智能合约**: Foundry + Solidity 0.8.24
- **前端**: Next.js + TypeScript + TailwindCSS
- **测试网络**: Sepolia (Chain ID: 11155111)

### 7.2 部署状态
- ✅ 智能合约已部署到Sepolia测试网
- ✅ 前端应用开发完成
- ✅ IPFS元数据已上传
- 🔄 主网部署待定

### 7.3 测试覆盖
- 智能合约单元测试
- 前端功能测试
- 集成测试

## 8. 路线图

### 8.1 当前阶段 (v1.0)
- [x] 核心智能合约开发
- [x] 基础前端界面
- [x] 测试网部署
- [x] 基本功能测试

### 8.2 下一阶段 (v1.1)
- [ ] 主网部署
- [ ] 社区推广
- [ ] 安全审计
- [ ] 性能优化

### 8.3 未来规划 (v2.0+)
- [ ] 治理代币机制
- [ ] NFT交易市场
- [ ] 移动端应用
- [ ] 跨链支持

## 9. 风险评估

### 9.1 技术风险
- 智能合约漏洞风险
- 前端安全风险
- IPFS存储稳定性

### 9.2 经济风险
- 代币价格波动
- 高收益率的可持续性
- 流动性风险

### 9.3 监管风险
- DeFi监管政策变化
- NFT相关法规影响

## 10. 成功指标

### 10.1 用户指标
- 活跃用户数量
- 用户留存率
- 交易频次

### 10.2 经济指标
- 总锁仓价值 (TVL)
- NFT铸造数量
- 代币流通量

### 10.3 技术指标
- 合约执行成功率
- 前端性能指标
- 系统可用性

---

**文档版本**: v1.0  
**更新日期**: 2024年12月  
**维护者**: DrBEE 开发团队
